# chem_safety_app.py
# ì‹¤í–‰: streamlit run chem_safety_app.py

import streamlit as st

# =========================
# ë°ì´í„°(í‚¤ì›Œë“œ/ê·œì¹™/ì„¤ëª…)
# =========================
ALIASES = {
    "bleach": {"í‘œë°±ì œ", "ë½ìŠ¤", "ì°¨ì•„ì—¼ì†Œì‚°ë‚˜íŠ¸ë¥¨", "sodium hypochlorite", "hypochlorite"},
    "ammonia": {"ì•”ëª¨ë‹ˆì•„", "ammonia", "nh3"},
    "acid": {"ì‹ì´ˆ", "ì´ˆì‚°", "acetic acid", "êµ¬ì—°ì‚°", "citric acid", "ì—¼ì‚°", "hydrochloric acid", "hcl", "í™©ì‚°", "sulfuric acid"},
    "peroxide": {"ê³¼ì‚°í™”ìˆ˜ì†Œ", "hydrogen peroxide", "h2o2"},
    "alcohol": {"ì—íƒ„ì˜¬", "ethanol", "ipa", "isopropyl alcohol", "ì´ì†Œí”„ë¡œí•„ì•Œì½”ì˜¬", "ì†Œë…ìš© ì•Œì½”ì˜¬"},
    "quat": {"ë²¤ì˜ì½”ëŠ„ì—¼í™”ë¬¼", "benzalkonium chloride", "quat", "4ê¸‰ ì•”ëª¨ëŠ„ì—¼", "quaternary ammonium"},
    "baking_soda": {"ë² ì´í‚¹ì†Œë‹¤", "íƒ„ì‚°ìˆ˜ì†Œë‚˜íŠ¸ë¥¨", "sodium bicarbonate"},
}

# ìœ„í—˜ ì¡°í•© ê·œì¹™(í•µì‹¬ ê²½ê³  ë©”ì‹œì§€)
HAZARDOUS_RULES = {
    frozenset({"bleach", "ammonia"}): "â€˜í‘œë°±ì œ+ì•”ëª¨ë‹ˆì•„â€™ í˜¼í•©ì€ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤.",
    frozenset({"bleach", "acid"}): "â€˜í‘œë°±ì œ+ì‚°(ì‹ì´ˆ/êµ¬ì—°ì‚°/ì—¼ì‚° ë“±)â€™ í˜¼í•©ì€ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤.",
    frozenset({"bleach", "alcohol"}): "â€˜í‘œë°±ì œ+ì•Œì½”ì˜¬â€™ í˜¼í•©ì€ ìœ„í—˜í•©ë‹ˆë‹¤.",
    frozenset({"peroxide", "acid"}): "â€˜ê³¼ì‚°í™”ìˆ˜ì†Œ+ì‚°â€™ í˜¼í•©ì€ ìœ„í—˜í•©ë‹ˆë‹¤.",
    frozenset({"baking_soda", "acid"}): "â€˜ë² ì´í‚¹ì†Œë‹¤+ì‚°â€™ì€ ë°€í ìš©ê¸°ì—ì„œ ìœ„í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    frozenset({"bleach", "quat"}): "â€˜í‘œë°±ì œ+4ê¸‰ì•”ëª¨ëŠ„(ì†Œë…ì œ)â€™ í˜¼í•©ì€ í”¼í•˜ì„¸ìš”.",
}

# í•™ìƒìš© ì‰¬ìš´ ì„¤ëª…(ì™œ ìœ„í—˜í•œê°€ Â· ì¦ìƒ Â· ëŒ€ì‹  ì–´ë–»ê²Œ)
HAZ_DETAILS = {
    frozenset({"bleach", "ammonia"}): {
        "why": "ë‘˜ì„ ì„ìœ¼ë©´ â€˜í´ë¡œë¼ë¯¼â€™ ê°™ì€ ìê·¹ì„± ê°€ìŠ¤ê°€ ìƒê²¨ ëˆˆÂ·ì½”ê°€ ë”°ê°‘ê³  ê¸°ì¹¨Â·í˜¸í¡ê³¤ë€ì„ ìœ ë°œí•  ìˆ˜ ìˆìŒ.",
        "symptoms": "ëˆˆÂ·ëª© ë”°ê°€ì›€, ê¸°ì¹¨, ë©”ìŠ¤êº¼ì›€, ìˆ¨ ê°€ì¨, ì–´ì§€ëŸ¬ì›€.",
        "instead": "í•˜ë£¨ì— í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ì„¸ìš”. í‘œë°±ì œë¥¼ ì¼ë‹¤ë©´ ì¶©ë¶„íˆ ë¬¼ë¡œ í—¹êµ° ë’¤ í™˜ê¸°ì‹œí‚¤ê³ , ë‹¤ë¥¸ ë‚  ì•”ëª¨ë‹ˆì•„ ì œí’ˆì„ ì‚¬ìš©í•˜ì„¸ìš”.",
    },
    frozenset({"bleach", "acid"}): {
        "why": "ì„ì´ë©´ â€˜ì—¼ì†Œ ê°€ìŠ¤(Clâ‚‚)â€™ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ. ì—¼ì†Œ ê°€ìŠ¤ëŠ” í˜¸í¡ê¸°ì— ë§¤ìš° ìê·¹ì ì„.",
        "symptoms": "ëˆˆë¬¼, ì‹¬í•œ ê¸°ì¹¨, ê°€ìŠ´ ë‹µë‹µ, í˜¸í¡ ê³¤ë€. ë†’ì€ ë†ë„ëŠ” í ì†ìƒ ìœ„í—˜.",
        "instead": "í‘œë°±ì œì™€ ì‹ì´ˆÂ·êµ¬ì—°ì‚°Â·ì—¼ì‚° ê³„ì—´ì€ ì ˆëŒ€ í•¨ê»˜ ì“°ì§€ ë§ˆì„¸ìš”. í•„ìš”í•œ ê²½ìš° â€˜ë‹¤ë¥¸ ë‚ â€™ ê°ê° ë”°ë¡œ ì‚¬ìš©í•˜ê³  ì¶©ë¶„íˆ í—¹êµ° ë’¤ í™˜ê¸°í•˜ì„¸ìš”.",
    },
    frozenset({"bleach", "alcohol"}): {
        "why": "íŠ¹ì • ì¡°ê±´ì—ì„œ ë…ì„± ë¶€ì‚°ë¬¼(ì˜ˆ: í´ë¡œë¡œí¬ë¦„)ì´ ìƒê¸¸ ìˆ˜ ìˆì–´ ê±´ê°•ì— í•´ë¡œì›€.",
        "symptoms": "ë‘í†µ, ì–´ì§€ëŸ¬ì›€, ë©”ìŠ¤êº¼ì›€ ë“±(ë…¸ì¶œ ì •ë„ì— ë”°ë¼ ë‹¤ë¦„).",
        "instead": "í‘œë°±ì œë¥¼ ì“´ ë‚ ì—ëŠ” ì•Œì½”ì˜¬ ê¸°ë°˜ ì œí’ˆ(ì†Œë…ìš© ì•Œì½”ì˜¬, ìœ ë¦¬ì„¸ì •ì œ ë“±)ì„ í”¼í•˜ê³ , ì„œë¡œ ë‹¤ë¥¸ ë‚ ì— ë¶„ë¦¬í•´ ì‚¬ìš©í•˜ì„¸ìš”.",
    },
    frozenset({"peroxide", "acid"}): {
        "why": "â€˜ê³¼ì´ˆì‚°â€™ ê°™ì€ ê°•í•œ ìê·¹Â·ë¶€ì‹ì„± ë¬¼ì§ˆì´ ìƒê¸¸ ìˆ˜ ìˆìŒ.",
        "symptoms": "í”¼ë¶€Â·ëˆˆ ìê·¹, í˜¸í¡ê¸° ìê·¹.",
        "instead": "ê³¼ì‚°í™”ìˆ˜ì†Œì™€ ì‚°ì„± ì œí’ˆì€ í•¨ê»˜ ì“°ì§€ ë§ê³ , ê°ê° í•„ìš”í•œ ê²½ìš° ì œí’ˆë³„ ì•ˆë‚´ëŒ€ë¡œ ë‹¨ë… ì‚¬ìš©í•˜ì„¸ìš”.",
    },
    frozenset({"baking_soda", "acid"}): {
        "why": "ì´ì‚°í™”íƒ„ì†Œ(COâ‚‚)ê°€ ë¹ ë¥´ê²Œ ë°œìƒ. ë°€í ìš©ê¸°ì—ì„œëŠ” ì••ë ¥ ìƒìŠ¹ìœ¼ë¡œ â€˜í‘â€™ í„°ì§ˆ ìœ„í—˜.",
        "symptoms": "ë°€í ìƒíƒœì—ì„œ ìš©ê¸° íŒŒì†Â·íŠ€ê¹€ ìœ„í—˜.",
        "instead": "ë°€í ìš©ê¸°ì—ì„œ ì„ì§€ ë§ˆì„¸ìš”. í†µí’ ì˜ ë˜ëŠ” ê³³ì—ì„œ ì†ŒëŸ‰ë§Œ, ê°œë°© ìš©ê¸°ì—ì„œë§Œ ë°˜ì‘ ì‹¤í—˜ì²˜ëŸ¼ ì‚¬ìš©í•˜ì„¸ìš”.",
    },
    frozenset({"bleach", "quat"}): {
        "why": "ìƒí˜¸ ì‘ìš©ìœ¼ë¡œ íš¨ê³¼ê°€ ë–¨ì–´ì§€ê±°ë‚˜ ì”ë¥˜ ë°˜ì‘ì´ ìƒê¸¸ ìˆ˜ ìˆìŒ.",
        "symptoms": "íš¨ê³¼ ì €í•˜, í‘œë©´ ì†ìƒ ê°€ëŠ¥.",
        "instead": "í•œ ë²ˆì— í•˜ë‚˜ì˜ ì œí’ˆë§Œ, ì„œë¡œ ë‹¤ë¥¸ ë‚  ë”°ë¡œ ì‚¬ìš©í•˜ì„¸ìš”. ì‚¬ìš© í›„ ë¬¼ë¡œ ì¶©ë¶„íˆ í—¹êµ¬ê¸°.",
    },
}

SURFACE_GUIDE = {
    "ëŒ€ë¦¬ì„/ì„ì¬": {
        "ê¶Œì¥": ["ì¤‘ì„± ì„¸ì œ", "ë¯¸ì˜¨ìˆ˜"],
        "ì£¼ì˜": ["ì‚°(ì‹ì´ˆ/êµ¬ì—°ì‚°)", "í‘œë°±ì œ"],
        "ë©”ëª¨": "ì„íšŒì§ˆ(íƒ„ì‚°ì¹¼ìŠ˜)ì´ë¼ ì‚°ì— ì•½í•¨. ë°˜ì Â·ë¶€ì‹ ìœ„í—˜.",
    },
    "ëª©ì¬": {
        "ê¶Œì¥": ["ì¤‘ì„±Â·ì•½ì•Œì¹¼ë¦¬ ì„¸ì œ", "ë§ˆë¥¸ì²œ", "êµ­ì†Œ ì˜¤ì—¼ ì‹œ ì†ŒëŸ‰ ì•Œì½”ì˜¬"],
        "ì£¼ì˜": ["ê³¼ë„í•œ ìˆ˜ë¶„", "ê°•ì‚°/ê°•ì•Œì¹¼ë¦¬"],
        "ë©”ëª¨": "ì½”íŒ… ì†ìƒÂ·ë³€ìƒ‰ ì£¼ì˜. ë¬¼ê¸°ëŠ” ë°”ë¡œ ë‹¦ê¸°.",
    },
    "ìŠ¤í…Œì¸ë¦¬ìŠ¤": {
        "ê¶Œì¥": ["ì¤‘ì„± ì„¸ì œ", "ì§§ì€ ì‹œê°„ í¬ì„ í‘œë°±ì œ(ì´í›„ ì¦‰ì‹œ í—¹êµ¼)"],
        "ì£¼ì˜": ["ì—¼ì‚° ë“± ê°•ì‚°", "ì¥ì‹œê°„ í‘œë°±ì œ ì ‘ì´‰"],
        "ë©”ëª¨": "ì‚¬ìš© í›„ ë¬¼ë¡œ ì¶©ë¶„íˆ í—¹êµ¬ë©´ ì–¼ë£©Â·ë¶€ì‹ ì˜ˆë°©.",
    },
    "ìœ ë¦¬/íƒ€ì¼": {
        "ê¶Œì¥": ["ì¤‘ì„± ì„¸ì œ", "í¬ì„ ì‚°(ë¹„ëˆ„ë•Œ ì œê±°)", "ì•Œì½”ì˜¬"],
        "ì£¼ì˜": ["í™˜ê¸° ë¶€ì¡± ìƒíƒœì—ì„œ ì•”ëª¨ë‹ˆì•„ ê³¼ë‹¤ ì‚¬ìš©"],
        "ë©”ëª¨": "ê¸ˆì† ë¶€í’ˆ ì ‘ì´‰ ì‹œ ë¶€ì‹ ì£¼ì˜, í™˜ê¸° í•„ìˆ˜.",
    },
}

# =========================
# ìœ í‹¸ í•¨ìˆ˜
# =========================
def normalize_token(token: str) -> set:
    token = token.strip().lower()
    hits = set()
    for key, variants in ALIASES.items():
        for v in variants:
            if v.lower() in token:
                hits.add(key)
    if token in ALIASES.keys():
        hits.add(token)
    return hits

def check_mixture(items: list):
    keys = set()
    for raw in items:
        keys |= normalize_token(raw)
    messages = []
    details = []
    klist = list(keys)
    for i in range(len(klist)):
        for j in range(i+1, len(klist)):
            combo = frozenset({klist[i], klist[j]})
            if combo in HAZARDOUS_RULES:
                messages.append(HAZARDOUS_RULES[combo])
                details.append(HAZ_DETAILS.get(combo))
    return keys, messages, details

def dilution_calc(c1, c2, v2):
    # c1, c2: %, v2: mL(ë˜ëŠ” ê°™ì€ ë‹¨ìœ„)
    if c1 <= 0 or c2 <= 0 or v2 <= 0 or c2 >= c1:
        return None, None
    v1 = (c2 * v2) / c1
    solvent = v2 - v1
    return v1, solvent

# =========================
# Streamlit UI
# =========================
st.set_page_config(page_title="í™”í•™ ì•ˆì „ ë„ìš°ë¯¸(í•™ìƒìš©)", page_icon="ğŸ§¹")
st.title("ğŸ§¹ í™”í•™ ì•ˆì „ ë„ìš°ë¯¸ (í•™ìƒìš©)")

st.markdown(
    """
**ë¬´ì—‡ì„ í•˜ë‚˜ìš”?**  
- âŒ **ì„ìœ¼ë©´ ìœ„í—˜í•œ ì„¸ì œ ì¡°í•©**ì„ ì•Œë ¤ì¤˜ìš”.  
- ğŸ§ª **í¬ì„(ë¬¼ì— íƒ€ê¸°) ê³„ì‚°**ì„ ì‰¬ìš´ ì˜ˆì‹œì™€ í•¨ê»˜ ì•Œë ¤ì¤˜ìš”.  
- ğŸ  **í‘œë©´ë³„ ì•ˆì „ ê°€ì´ë“œ**(ëŒ€ë¦¬ì„, ëª©ì¬ ë“±)ë¥¼ ë³´ì—¬ì¤˜ìš”.  

**ê¸°ë³¸ ì›ì¹™(í•™ìƒìš© ìš”ì•½)**  
1) í•œ ë²ˆì— **í•˜ë‚˜ì˜ ì œí’ˆë§Œ** ì‚¬ìš©í•˜ê¸°  
2) **í™˜ê¸°** ì˜í•˜ê¸°(ì°½ë¬¸ ì—´ê³ , ì„ í’ê¸° ì¼œê³ )  
3) ì œí’ˆ **ë¼ë²¨**ê³¼ **í˜¼í•© ê¸ˆì§€** í™•ì¸í•˜ê¸°  
4) ì›ì•¡ì€ **ë¬¼ì— í¬ì„**í•´ì„œ ì‚¬ìš©í•˜ê¸°(í•„ìš” ì‹œ)
"""
)

menu = st.sidebar.radio(
    "ë©”ë‰´",
    ["í˜¼í•© ì•ˆì „ í™•ì¸", "í¬ì„ ê³„ì‚°ê¸°(ì‰¬ìš´ ì„¤ëª…)", "í‘œë©´ë³„ ê°€ì´ë“œ", "FAQ(í•™ìƒìš©)"]
)

# -------------------------
# 1) í˜¼í•© ì•ˆì „ í™•ì¸
# -------------------------
if menu == "í˜¼í•© ì•ˆì „ í™•ì¸":
    st.subheader("âš ï¸ ì„¸ì œ/ì„±ë¶„ í˜¼í•© ì•ˆì „ í™•ì¸")
    st.caption("ì˜ˆì‹œ ì…ë ¥: `ë½ìŠ¤, ì‹ì´ˆ`  /  `ê³¼ì‚°í™”ìˆ˜ì†Œ 6%, êµ¬ì—°ì‚°`  /  `ì•”ëª¨ë‹ˆì•„ í´ë¦¬ë„ˆ`")
    raw = st.text_input("ì„¸ì œ/ì„±ë¶„ ì…ë ¥(ì‰¼í‘œë¡œ êµ¬ë¶„)", "ë½ìŠ¤, ì‹ì´ˆ")
    if st.button("ì•ˆì „ ì²´í¬"):
        items = [x.strip() for x in raw.split(",") if x.strip()]
        keys, messages, details = check_mixture(items)

        if keys:
            st.write("ğŸ” ì¸ì‹ëœ ì„±ë¶„ í‚¤:", ", ".join(sorted(keys)) or "(ì•Œ ìˆ˜ ì—†ìŒ)")
        if messages:
            for idx, m in enumerate(messages, 1):
                st.error(f"{idx}. {m}")
            # ìƒì„¸ ì‰¬ìš´ ì„¤ëª…
            st.markdown("### ğŸ’¡ ì™œ ìœ„í—˜í• ê¹Œìš”? / ëŒ€ì‹  ì–´ë–»ê²Œ í• ê¹Œìš”?")
            for d in details:
                if not d: 
                    continue
                with st.expander("ìƒì„¸ ë³´ê¸°", expanded=False):
                    st.write("**ì™œ ìœ„í—˜í•œê°€(ì‰¬ìš´ ì„¤ëª…)**:", d["why"])
                    st.write("**ëª¸ì— ë‚˜íƒ€ë‚  ìˆ˜ ìˆëŠ” ì¦ìƒ**:", d["symptoms"])
                    st.write("**ëŒ€ì‹  ì´ë ‡ê²Œ ì‚¬ìš©í•˜ì„¸ìš”(ì•ˆì „ ëŒ€ì•ˆ)**:", d["instead"])
            st.info("ê¸°ë³¸ ìˆ˜ì¹™: í•œ ë²ˆì— í•˜ë‚˜ì˜ ì œí’ˆë§Œ ì‚¬ìš© Â· í™˜ê¸° Â· ì¥ê°‘/ë§ˆìŠ¤í¬ ì°©ìš© Â· ì‚¬ìš© í›„ ë¬¼ë¡œ ì¶©ë¶„íˆ í—¹êµ¬ê¸°")
        else:
            st.success("ì¹˜ëª…ì  í˜¼í•© ê¸ˆì§€ ì¡°í•©ì´ ê°ì§€ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ê·¸ë˜ë„ í•œ ë²ˆì— í•˜ë‚˜ì˜ ì œí’ˆë§Œ ì‚¬ìš©í•˜ê³ , í™˜ê¸°ë¥¼ ì¶©ë¶„íˆ í•´ì£¼ì„¸ìš”.")

# -------------------------
# 2) í¬ì„ ê³„ì‚°ê¸°(ì‰¬ìš´ ì„¤ëª…)
# -------------------------
elif menu == "í¬ì„ ê³„ì‚°ê¸°(ì‰¬ìš´ ì„¤ëª…)":
    st.subheader("ğŸ§ª í¬ì„ ê³„ì‚°ê¸° (C1V1 = C2V2)")
    st.markdown(
        """
**ì‰¬ìš´ ë§ë¡œ ì„¤ëª…**  
- **C1**: ì›ì•¡ì˜ ì§„í•˜ê¸°(%) â€” ì˜ˆ: ë½ìŠ¤ 5%  
- **C2**: ë§Œë“¤ê³  ì‹¶ì€ ì§„í•˜ê¸°(%) â€” ì˜ˆ: 0.1% ì†Œë…ì•¡  
- **V2**: ë§Œë“¤ê³  ì‹¶ì€ ì–‘(ë¶€í”¼) â€” ì˜ˆ: 1000 mL(=1L)  

ğŸ‘‰ **ì›ì•¡ì€ ì–¼ë§ˆë‚˜? (V1)**, **ë¬¼ì€ ì–¼ë§ˆë‚˜? (V2 - V1)** ë¥¼ ê³„ì‚°í•´ ì¤ë‹ˆë‹¤.  
â€» í•­ìƒ ì•ˆì „ì„ ìœ„í•´ ì œí’ˆ ë¼ë²¨ ì§€ì¹¨ì„ ìš°ì„ í•˜ì„¸ìš”.
"""
    )

    left, right = st.columns(2)
    with left:
        preset = st.selectbox(
            "ë¹ ë¥¸ ì˜ˆì‹œ ì„ íƒ",
            [
                "ì§ì ‘ ì…ë ¥",
                "ì˜ˆì‹œ) ë½ìŠ¤ 5% â†’ 0.1%, ìµœì¢… 1000 mL",
                "ì˜ˆì‹œ) ê³¼ì‚°í™”ìˆ˜ì†Œ 3% â†’ 0.5%, ìµœì¢… 500 mL",
            ],
        )

    if preset == "ì˜ˆì‹œ) ë½ìŠ¤ 5% â†’ 0.1%, ìµœì¢… 1000 mL":
        c1, c2, v2 = 5.0, 0.1, 1000.0
    elif preset == "ì˜ˆì‹œ) ê³¼ì‚°í™”ìˆ˜ì†Œ 3% â†’ 0.5%, ìµœì¢… 500 mL":
        c1, c2, v2 = 3.0, 0.5, 500.0
    else:
        c1 = st.number_input("ì›ì•¡ ë†ë„ C1 (%)", value=5.0, min_value=0.0, step=0.1)
        c2 = st.number_input("ëª©í‘œ ë†ë„ C2 (%)", value=0.1, min_value=0.0, step=0.1)
        v2 = st.number_input("ìµœì¢… ë¶€í”¼ V2 (mL)", value=1000.0, min_value=0.0, step=50.0)

    if st.button("ê³„ì‚°í•˜ê¸°"):
        v1, solvent = dilution_calc(c1, c2, v2)
        if v1 is None:
            st.error("ì…ë ¥ê°’ì„ í™•ì¸í•˜ì„¸ìš”. (C1 > C2 > 0, V2 > 0)")
        else:
            st.success(f"ì›ì•¡ í•„ìš”ëŸ‰ V1 â‰ˆ **{v1:.1f} mL**")
            st.info(f"ë¬¼(í¬ì„ ìš©ë§¤) â‰ˆ **{solvent:.1f} mL**")
            st.caption("íŒ: ì›ì•¡ì„ ë¬¼ì— â€˜ì¡°ê¸ˆì”©â€™ ë„£ì–´ê°€ë©° ì €ìœ¼ì„¸ìš”. ì‚¬ìš© í›„ í™˜ê¸°Â·í—¹êµ¼ í•„ìˆ˜!")

    with right:
        st.markdown("#### í•™ìƒìš© í•œ ì¤„ ìš”ì•½")
        st.write("ì›ì•¡ì´ ì§„í•˜ë©´ ì¡°ê¸ˆë§Œ ë„£ê³ , ë¬¼ì„ ë§ì´ ë„£ìœ¼ë©´ ì§„í•˜ê¸°ê°€ ë‚®ì•„ì ¸ìš”!")
        st.write("ì˜ˆ: 5% ë½ìŠ¤ 20mL + ë¬¼ 980mL = 0.1% ì†Œë…ì•¡ 1000mL")

# -------------------------
# 3) í‘œë©´ë³„ ê°€ì´ë“œ
# -------------------------
elif menu == "í‘œë©´ë³„ ê°€ì´ë“œ":
    st.subheader("ğŸ  í‘œë©´ë³„ ê¶Œì¥/ì£¼ì˜ ê°€ì´ë“œ")
    st.caption("í‘œë©´(ì¬ì§ˆ)ì— ë”°ë¼ ì•ˆì „í•œ ì„¸ì œê°€ ë‹¬ë¼ìš”. ëª¨ë¥´ë©´ â€˜ì¤‘ì„± ì„¸ì œ + ë¯¸ì˜¨ìˆ˜â€™ê°€ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤.")
    for surf, info in SURFACE_GUIDE.items():
        with st.expander(surf):
            st.write("âœ… ê¶Œì¥:", ", ".join(info["ê¶Œì¥"]))
            st.write("âš ï¸ ì£¼ì˜:", ", ".join(info["ì£¼ì˜"]))
            st.caption(info["ë©”ëª¨"])

# -------------------------
# 4) FAQ(í•™ìƒìš©)
# -------------------------
elif menu == "FAQ(í•™ìƒìš©)":
    st.subheader("â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (í•™ìƒìš© ì‰¬ìš´ ì„¤ëª…)")
    with st.expander("ì—¼ì†Œ ê°€ìŠ¤ê°€ ë­ì˜ˆìš”? ì™œ ìœ„í—˜í•˜ì£ ?"):
        st.write(
            "- **ì—¼ì†Œ ê°€ìŠ¤(Clâ‚‚)**ëŠ” í‘œë°±ì œ(ë½ìŠ¤)ì™€ ì‚°ì„± ë¬¼ì§ˆ(ì‹ì´ˆ ë“±)ì´ ë§Œë‚˜ ìƒê¸¸ ìˆ˜ ìˆëŠ” ìê·¹ì„± ê¸°ì²´ì˜ˆìš”.\n"
            "- ë‚®ì€ ë†ë„ë„ ëˆˆÂ·ì½”ê°€ ë”°ê°‘ê³  ê¸°ì¹¨ì´ ë‚˜ìš”. ë†’ì€ ë†ë„ëŠ” **í˜¸í¡ ê³¤ë€**ê³¼ **í ì†ìƒ**ì„ ì¼ìœ¼í‚¬ ìˆ˜ ìˆì–´ ë§¤ìš° ìœ„í—˜í•´ìš”."
        )
        st.info("ì˜ˆë°©ë²•: í‘œë°±ì œì™€ ì‚°ì„± ì œí’ˆì„ ì ˆëŒ€ í•¨ê»˜ ì“°ì§€ ì•Šê¸° Â· í™˜ê¸°í•˜ê¸° Â· í•œ ë²ˆì— í•˜ë‚˜ë§Œ ì‚¬ìš©í•˜ê¸°")
    with st.expander("ì´ë¯¸ ì„ì—ˆê³  ëƒ„ìƒˆê°€ ì½”ë¥¼ ì°Œë¥¼ ë•Œ ì–´ë–»ê²Œ í•´ìš”?"):
        st.write(
            "1) ì¦‰ì‹œ ì‚¬ìš©ì„ ë©ˆì¶”ê³  ì°½ë¬¸ì„ ì—´ì–´ **í™˜ê¸°**í•˜ì„¸ìš”.\n"
            "2) í˜¼í•©ë¬¼ì„ ë” ì´ìƒ ê±´ë“œë¦¬ì§€ ë§ê³  ìë¦¬ë¥¼ ë²—ì–´ë‚˜ì„¸ìš”.\n"
            "3) ì¦ìƒì´ ì‹¬í•˜ë©´ ë³´í˜¸ìì™€ í•¨ê»˜ **ì˜ë£Œ ìƒë‹´**ì„ ë°›ìœ¼ì„¸ìš”."
        )
    with st.expander("í¬ì„ì€ ì™œ í•´ì•¼ í•˜ë‚˜ìš”?"):
        st.write(
            "ê°•í•œ ì›ì•¡ì€ í‘œë©´ì„ ìƒí•˜ê²Œ í•˜ê±°ë‚˜ ìš°ë¦¬ ëª¸ì— ìê·¹ì„ ì¤„ ìˆ˜ ìˆì–´ìš”. "
            "ê·¸ë˜ì„œ **ë¬¼ì— íƒ€ì„œ** ì ì ˆí•œ ì§„í•˜ê¸°ë¡œ **ì•½í•˜ê²Œ** ë§Œë“  ë’¤ ì‚¬ìš©í•´ìš”."
        )
    with st.expander("ê°€ì¥ ì•ˆì „í•œ ê¸°ë³¸ ìˆ˜ì¹™ì€ìš”?"):
        st.write(
            "- í•œ ë²ˆì— **í•˜ë‚˜ì˜ ì œí’ˆë§Œ** ì‚¬ìš©\n"
            "- **í™˜ê¸°** ì˜ í•˜ê¸°\n"
            "- ì‚¬ìš© í›„ **ë¬¼ë¡œ í—¹êµ¬ê¸°**\n"
            "- **ë¼ë²¨(í˜¼í•© ê¸ˆì§€)** ê¼­ í™•ì¸\n"
            "- ì† ë³´í˜¸ìš© **ì¥ê°‘**Â·**ë§ˆìŠ¤í¬** ì°©ìš©"
        )

st.divider()
st.caption("â€» ì´ ì•±ì€ ìƒí™œ ì•ˆì „ í•™ìŠµìš© ì•ˆë‚´ì…ë‹ˆë‹¤. ì‹¤ì œ ì‚¬ìš© ì‹œì—ëŠ” ì œí’ˆ ë¼ë²¨ê³¼ ì•ˆì „ìë£Œ(SDS)ë¥¼ ìš°ì„ í•˜ì„¸ìš”.")
